<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>图片选项卡</title>
    <script type="text/javascript" src="../../bower_components/react/react.js"></script><!--核心react-->
    <script type="text/javascript" src="../../bower_components/react/react-dom.js"></script><!--虚拟dom-->
    <script type="text/javascript" src="../../bower_components/babel/browser.js"></script><!--使用jsx-->
    <style type="text/css">
        *{margin:0;padding:0}
        .tab{
            width:400px;
            overflow: hidden;
            position: absolute;
            transform: translate(-50%,-50%);
            left:50%;
            top:50%;
            border: 1px solid black;
        }

        .topDiv{width:100%;height:300px;float:left;position:relative;}
        .topDiv .leftClick{position:absolute;z-index:3;left:3px;top:50%;transform:translateY(-50%);background:green;color:red;cursor:pointer;}
        .topDiv .rightClick{position:absolute;z-index:3;right:3px;top:50%;transform:translateY(-50%);background:green;color:red;cursor:pointer;}
        .topDiv ul{height:100%;position:absolute;left:0;top:0;transition:0.7s;}
        .topDiv ul li{width:400px;height:300px;float:left;background-size:cover;}
        .centerBox{width:100%;height:20px;background:pink;float:left;line-height:20px;}
        .centerBox .rightBox span{cursor:pointer;margin-right:10px;}
        .centerBox .rightBox{float:right;}
        .centerBox .leftText{margin-left:10px;}

        .BottomBox{width:100%;height:100px;float:left;position:relative;}
        .BottomBox ul{height:100%;position:absolute;}
        .BottomBox ul li{width:90px;height:90px;border:5px black solid;float:left;background-size:cover;background-position:center center;transition:0.7s;}
        .BottomBox ul li.active{border-color:green;}
    </style>
</head>
<body>
<div id='app'></div>
</body>
<script type="text/babel">

    let Json = {
        pic:['1.jpg','2.jpg','3.jpg','4.jpg','5.jpg','6.jpg'],
        text:['one','two','three','four','five','six']
    }
    class Top extends React.Component{

        constructor() {
            super();

        }

        left(value){
           this.props.move(value,'-');
        }

        right(value){
            this.props.move(value,'+');
        }

        render(){
            let oLi = [];
            let pic = 'pic/';
            for(let i=0;i<this.props.pic.length;i++){
                oLi.push(<li key={i} style={{backgroundImage:'url('+pic+this.props.pic[i]+')'}}></li>);
            }
            return(
                <div className="topDiv">
                    <div className='leftClick' onClick={this.left.bind(this,this.props.index)}>左</div>
                    <div className='rightClick' onClick={this.right.bind(this,this.props.index)}>右</div>
                    <ul style={{width:this.props.pic.length*400+'px',left:this.props.index*-400+'px'}}>
                        {oLi}
                    </ul>
                </div>
            );
        }
    }

    class Bottom extends React.Component{

        click(index){
            this.props.change(index);
        }

        render(){
            let aLi = [];
            let pic = 'pic/';
            this.props.pic.forEach((val,index)=>{
                aLi.push(<li className={index==this.props.index?'active':''} onClick={this.click.bind(this,index)} key={index} style={{backgroundImage:'url('+pic+val+')'}}></li>)
            })
            return(
                <div className='BottomBox'>
                    <ul  style={{width:this.props.pic.length*100+'px',left:this.props.index<3?0:(this.props.index-3)*-100+'px'}}>
                        {aLi}
                    </ul>
                </div>
            );
        }
    }

    class Center extends React.Component{
        render(){

            return(
                <div className="centerBox">
                    <span className='leftText'>{this.props.text[this.props.index]}</span>
                    <div className='rightBox'>
                        <span>大</span>
                        <span>小</span>
                    </div>
                </div>
            );
        }
    }

    class Tab extends React.Component{

        constructor() {
            super();
            this.state={
                index:0
            }
        }

        change(v){
            this.setState({index:v});
        }

        move(value,sign){
            console.log(value,sign);
            if(sign=='+'){
                if(value<this.props.JsonTo.pic.length-1){
                    value = value+1;
                }
            }
            if(sign=='-'){
                if(value>0){
                    value = value-1;
                }
            }

            this.setState({index:value});
            console.log(this.state.index);
        }

        render(){
            return(
                <div className="tab">
                    <Top pic={this.props.JsonTo.pic} index={this.state.index} move={this.move.bind(this)}/>
                    <Center text={this.props.JsonTo.text} index={this.state.index}/>
                    <Bottom pic={this.props.JsonTo.pic} index={this.state.index} change={this.change.bind(this)}/>
                </div>
            );
        }
    }

    ReactDOM.render(<Tab JsonTo={Json}/>,app);

</script>
</html>