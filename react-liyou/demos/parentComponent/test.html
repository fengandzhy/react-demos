<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>tab测试</title>
    <script type="text/javascript" src="../../bower_components/react/react.js"></script><!--核心react-->
    <script type="text/javascript" src="../../bower_components/react/react-dom.js"></script><!--虚拟dom-->
    <script type="text/javascript" src="../../bower_components/babel/browser.js"></script><!--使用jsx-->
    <style type="text/css">
        .tab{
            width:100px;
            height:100px;
            border:1px solid black
        }
        .active{
            background-color: darkorange;
        }
    </style>
</head>
<body>
<div id='app'></div>
</body>
<script type="text/babel">

    class Top extends React.Component{

        constructor() {
            super();

        }

        click(i,e){
            // console.log(i);
            // console.log(e.target);
            //console.log(e.target.getAttribute('data-foo'));
            this.props.myClick(i);
        }

        render(){
            let aInput = [];
            for(let i =0;i<this.props.data.length;i++){
                aInput.push(<button  key={'button'+i} onClick={this.click.bind(this,i)}
                                     data-foo={i} className={this.props.myIndex==i?'active':''}>{this.props.data[i]}</button>);
            }
            return(
                <div>
                    {aInput}
                </div>
            );
        }
    }

    class Bottom extends React.Component{
        render(){
            let aDiv = [];
            for(let i =0;i<this.props.data.length;i++){
                aDiv.push(<div className='tab' key={i}
                               style={this.props.myIndex==i?{'display':'block'}:{'display':'none'}}>{this.props.data[i]}</div>);
            }
            return(
                <div>
                    {aDiv}
                </div>
            );
        }
    }

    class Tab extends React.Component{
        constructor() {
            super();
            this.state={
                index:0
            }
        }

        myClick(v){
           this.setState({
               index:v
           });
        }

        render(){
            return(
                <div>
                    <Top data = {this.props.data.top} myIndex={this.state.index} myClick={this.myClick.bind(this)}/>
                    <Bottom data= {this.props.data.bottom} myIndex={this.state.index}/>
                </div>
            );
        }
    }

    ReactDOM.render(<Tab data={{'top':['a','b','c'],'bottom':['A','B','C']}}/>,app);

</script>
</html>