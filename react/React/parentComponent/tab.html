<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>选项卡</title>
    <script type="text/javascript" src="../../bower_components/react/react.js"></script><!--核心react-->
    <script type="text/javascript" src="../../bower_components/react/react-dom.js"></script><!--虚拟dom-->
    <script type="text/javascript" src="../../bower_components/babel/browser.js"></script><!--使用jsx-->
    <style type="text/css">
        .tab{
            width:100px;
            height:100px;
            border:1px solid black
        }
        .active{
            background-color: darkorange;
        }
    </style>
</head>
<body>
<div id='app'></div>
</body>
<script type="text/babel">

    class Top extends React.Component{

        constructor() {
            super();

        }

        render(){
            let aInput = [];
            for(let i =0;i<this.props.data.length;i++){
                aInput.push(<button  key={'button'+i} data-foo={i}
                                     className={this.props.myIndex==i?'active':''}>{this.props.data[i]}</button>);
            }
            return(
                <div>
                    {aInput}
                </div>
            );
        }
    }

    class Bottom extends React.Component{
        render(){
            let aDiv = [];
            for(let i =0;i<this.props.data.length;i++){
                aDiv.push(<div className='tab' key={i}
                               style={this.props.myIndex==i?{'display':'block'}:{'display':'none'}}>{this.props.data[i]}</div>);
            }
            return(
                <div>
                    {aDiv}
                </div>
            );
        }
    }

    class Tab extends React.Component{

        constructor() {
            super();
            this.state={
                index:0
            }
            this.timer=null;
        }

        componentDidMount(){
            this.autoChange();
        }

        autoChange(){
            this.timer = setInterval(()=>{
                let index = this.state.index;
                index++;
                if(index==3){
                    index=0;
                }
                this.setState({
                    index:index
                });
            },this.props.timer);
        }

        mouseLeave(){
            this.autoChange();
        }

        mouseOver(v){
            clearInterval(this.timer);
        }

        render(){
            return(
                <div onMouseOver={this.mouseOver.bind(this)} onMouseLeave={this.mouseLeave.bind(this)}>
                    <Top data = {this.props.data.top} myIndex={this.state.index}/>
                    <Bottom data= {this.props.data.bottom} myIndex={this.state.index}/>
                </div>
            );
        }
    }

    ReactDOM.render(<Tab data={{'top':['a','b','c'],'bottom':['A','B','C']}} timer={1000}/>,app);

</script>
</html>