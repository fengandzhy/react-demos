<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>子组件向父组件通信</title>
    <script type="text/javascript" src="../../bower_components/react/react.js"></script><!--核心react-->
    <script type="text/javascript" src="../../bower_components/react/react-dom.js"></script><!--虚拟dom-->
    <script type="text/javascript" src="../../bower_components/babel/browser.js"></script><!--使用jsx-->
</head>
<body>
<div id='app'></div>
</body>
<script type="text/babel">

    class Status extends React.Component{
        constructor() {
            super();
            this.state={
                msg:''
            }
        }
        componentWillMount(){
           this.thisShow();
        }
        componentWillUpdate(){
            this.thisShow();
        }
        /**
         * 注意这里的setState的区别
         * */
        thisShow(){
            if(Number(this.props.v)<Number(this.props.min)){
                // this.setState={
                //     msg:'水结冰了'
                // }
                this.setState({
                    msg:'水结冰了'
                });
            }
            else if(Number(this.props.v)>Number(this.props.max)){
                // this.setState={
                //     msg:'水烧开了'
                // }
                this.setState({
                    msg:'水烧开了'
                });
            }
            else{
                // this.setState={
                //     msg:'水正在加热中'
                // }
                this.setState({
                    msg:'水正在加热中'
                });
            }
        }
        render(){
            // return(
            //     <div>{this.state.msg}</div>
            // )
            console.log(this.state);
            console.log(this.setState);
            console.log(this);
            return (<div>{this.state.msg}</div>)
        }
    }

    class Water extends React.Component{
        constructor() {
            super();
            this.state={
                tem:0
            }
        }

        render(){
            return(
                <div>
                    <input type="number" defaultValue={this.state.tem} onChange={this.change.bind(this)}/>
                    <Status v={this.state.tem} min={this.props.min} max={this.props.max}/>
                </div>
            )
        }

        change(e){
            this.setState({
                tem:e.target.value
            });
        }

    }

    ReactDOM.render(<Water min='0' max='100'/>,app);


</script>
</html>